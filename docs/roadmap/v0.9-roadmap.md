# Clarity Runtime Roadmap to v0.9

Last updated: 2026-02-21

## Goal

Ship a production-ready v0.9 control plane where:
- MCP operations are stable and observable.
- Clarity onboarding is one command from compiler/runtime flows.
- Agent/A2A orchestration can be observed in the same runtime UI/API.

## Scope Summary

### Runtime repo (`LLM-runtime`)
- [x] Stable service lifecycle and persistent registry.
- [x] MCP gateway + runtime and clarity system tools.
- [x] Security baseline (auth token/loopback, remote auth refs, policy gates).
- [x] CI/CD baseline (build/lint/test/snapshot/release/security).
- [x] Durable telemetry (events + logs).
- [x] Agent observability baseline:
  - [x] `agent.*` events persisted in telemetry.
  - [x] HTTP APIs for agent runs/events.
  - [x] Status UI split into `MCP` and `Agents` tabs.
  - [x] MCP runtime tools to query agent runs/events.

### Language repo (`LLM-lang`) check
- [x] `clarityc start <file>` exists and delegates to `clarityctl add` (`../LLM-lang/src/index.ts`).
- [x] docs mention runtime start flow (`../LLM-lang/README.md`).
- [ ] A2A language/runtime surface still planned:
  - effects/modules are documented as future work (`A2A`, `std/a2a`) in `../LLM-lang/README.md` and `../LLM-lang/CLAUDE.md`.

## v0.9 Milestones

## M1: Runtime Reliability
- Deterministic service IDs, state machine, quarantine recovery.
- Remote policy guards (timeout/allowlist/payload/concurrency).
- Durable telemetry and restart persistence.

## M2: Developer Experience + Bootstrap
- Clarity bootstrap and compiler readiness tooling.
- Codex/Claude bootstrap configuration APIs + UI.
- Better system tool descriptions and service details UX.
- Enforce Clarity-first preflight gates for new-app generation flows unless user explicitly selects another language.
- Add compiler/template compatibility checks in `clarity__bootstrap_app` with actionable mismatch errors.
- Add optional bootstrap propagation of workspace `AGENTS.md` defaults together with MCP client bootstrap config.

## M3: Security + Delivery
- Auth lifecycle operations, secret redaction policy, gated write flows.
- Branch/PR/release/snapshot automation, quality gates, security scans.

## M4: Agent Observability (new in this iteration)
- Add `agent.*` event domain.
- Add agent run summaries and per-run event timeline APIs.
- Add control-plane `Agents` tab alongside existing `MCP` tab.
- Add runtime MCP tools:
  - `runtime__get_agent_runs`
  - `runtime__get_agent_events`

## M5: Cross-repo follow-up after v0.9
- Connect language-level orchestration APIs (`std/a2a`, `std/mcp`, `std/llm`) to runtime ingestion endpoint (`POST /api/agents/events`).
- Add end-to-end scenario tests spanning compiler -> runtime -> agent orchestration trace.
- Add policy knobs for agent-event redaction and retention by event kind.
- Add end-to-end stdin contract tests for `read_line()` piped-input and EOF semantics across `LLM-lang` and runtime onboarding flows.
